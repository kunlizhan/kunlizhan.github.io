<div class="art-vp">
</div>
<script src="https://unpkg.com/isotope-layout@3/dist/isotope.pkgd.min.js"></script>
<script>
  function populateArtVP(array) {
    let parity = 0;
    let imgClass = "even";
    for (const item of array) {
      if (parity == 0) {
        imgClass = "even";
      } else {
        imgClass = "odd";
      }
      parity = (parity + 1) % 2;
      //<a href="#preview=${item.content}">
      let path_to_show = `/?show/${item.content.split('.')[0]}#top`;
      let newPost = `
        <a href="${path_to_show}">
          <img src="/img/${item.content}" class="${imgClass}"/>
        </a>
      `;
      $(`#main > #art-vp`).append(newPost);
    }
    $(`#main > #art-vp a`).click( function(e) {ajaxA(e, $(this));} );
  }
  function load_Art() {
    if (
      typeof index.img !== 'undefined'
      && index.img.length > 0
      &&typeof index.post !== 'undefined'
      && index.post.length > 0 //add music later
    )
    {
      $(`#main`).html(`<div id="art-vp"></div>`);
      function non_site(img) {
        for (const tag of img.tags) {
          if (tag == "site-use" || tag == "no-show") {
            return false;
          }
        }
        return true;
      }
      let img_list = index.img.filter(non_site);
      let by_date_reverse = img_list.sort(function (a, b) {
        return b.date - a.date;
      })
      populateArtVP(by_date_reverse);
    } else {
      console.log("no art or post list, trying again");
      setTimeout(function(){
        load_Art(name);
      },1000)
    }
  }
  load_Art();
  parseFragment();
  $(`title`).html(`Art and Music | Kunli Zhan`);
</script>
